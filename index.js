"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.createStore=(t,e)=>{let r;const n=e=>{t.forEach((t=>t.store.update((n=>{const s=e?t.reducer(n,e):n;return r=Object.assign(Object.assign({},r),{[t.name]:s}),s}))))};let s={dispatch:()=>{},getState:()=>r,getWritable:e=>{var r;return null===(r=t.find((t=>t.name===e)))||void 0===r?void 0:r.store}};const a=((t,e)=>{const r=(t,n,s)=>{const a=n.shift();a?a(e)((t=>r(t,n,s)))(t):s(t)};return e=>new Promise((n=>{r(e,[...t],n)}))})(e,s);return n(null),s.dispatch=(t=>{let e=!1,r=[];return async function n(s){if(!e)return e=!0,await t(s),e=!1,r.length?n(r.shift()):void 0;r.push(s)}})((async t=>{const e=await a(t);n(e)})),s};
